# Алгоритм PAM
Рассмотрена и реализована усовершенствованная версия одного из распространенных алгоритмов кластеризации графов – PAM (Partitioning Around Medoids). 
Разбиение на кластеры зависит от входных данных, в отличие от базового метода, где количество кластеров считается изначально известным.

## Формат входных и выходных данных
Входные данные будут содержаться в файле in.txt, выходные – в out.txt.

### Формат входных данных:
В первой строке записано число k_max (int) – верхняя граница кластеризации.
Затем в формате json сам граф в виде списков смежности  
  
Пример:  
```
5                                       
[                                       
    {"1": {"2": 4, "3": 14, "5": 3}},   
    {"2": {"1": 4, "3": 11, "4": 9}},   
    {"3": {"1": 14, "2": 11}},          
    {"4": {"2": 9}},                    
    {"5": {"1": 3}}                     
]
```
![graph_1](https://github.com/Prudkovskiy/k-medoids/blob/master/img/graph_1.jpg)  

### Формат выходных данных:
Кластеры списками смежностей в формате json (k-шт.)  
```
{"1":[1,2,5],"2":[3],"3":[4]}
```
![graph_2](https://github.com/Prudkovskiy/k-medoids/blob/master/img/graph_2.jpg)  

Также примеры смотреть в test_data.

## Краткое описание логики программы
Программа работает следующим образом:
1)	При запуске программы первым делом проверяется наличие входного и выходного файла. Если одного из них нет, то пишет: "you have not entered the input or output files".
2)	Создается объект reader, инициализируются его поля именами входных и выходных файлов. После идет считывание из входного файла. Опять же если считать не удалось, оповестит об этом.
3)	Вызывается метод Unpack, в процессе которого происходит инициализация матрицы смежности (reader.Matrix) и верхней границы кластеризации (reader.Kmax). Если входные данные были введены некорректно (формат не соответствует json, вершины невозможно преобразовать в int, первая строка Kmax не int), то сообщает об этом.
4)	Матрица смежности передается в алгоритм поиска минимальных путей в графе (алгоритм Флойда-Уоршелла). Таким образом, на выходе имеем матрицу расстояний между любой парой вершин в графе.
5)	Матрица расстояний передается в основной модуль программы, где происходит сама кластеризация.
6)	Затем полученные кластеры запаковываются методом reader.Pack и записываются в выходной файл методом reader.Write. При этом если записать не удалось (например, ваш выходной файл только для чтения), то выкидывается соответствующее предупреждение.


## Инструкция пользования
Для адекватной работы программы необходима версия языка Go 1.8 и старше,  
иначе возникает ошибка, связанная с отсутствием sort.Slice в предыдущих версиях (рекомендуется установить последнюю).  
Посмотреть версию – команда: `go version`  

Для того чтобы собрать проект, пишем:  
`go build main.go pam.go floyd_warshall.go init.go`  
(порядок модулей не важен)  

Далее программа готова к использованию. Пишем:  
`«executable_file» «inputFileName» «outputFileName»`  
Для запуска тестов в одной папке с test_coverage.go выполнить команду:  
`go test –v`
